<!doctype html>
<html lang="fr" data-theme="ndi">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Windows 10 - √âmulation | NDI 2025</title>
		<link rel="stylesheet" href="<%= basePath %>/stylesheets/style.css" />
		<script defer src="<%= basePath %>/javascripts/alpine.js"></script>
	</head>

	<body class="h-screen bg-base-100 overflow-hidden">
		<!-- Interface Windows 10 -->
		<div 
			x-data="{
				searchQuery: '',
				searchResults: [],
				showStartMenu: false,
				showSearch: false,
				windows: [],
				nextZIndex: 1000,
				apps: [
					{name: 'Explorateur de fichiers', icon: 'üìÅ', category: 'Syst√®me', content: 'Explorateur de fichiers Windows n√©cessite une licence Microsoft. Avec Linux, utilisez Nautilus, Dolphin ou Thunar gratuitement !'},
					{name: 'Microsoft Edge', icon: 'üåê', category: 'Internet', content: 'Edge n√©cessite Windows 10/11 et une connexion aux serveurs Microsoft. Utilisez Firefox, Chromium ou Brave sur Linux gratuitement !'},
					{name: 'Param√®tres', icon: '‚öôÔ∏è', category: 'Syst√®me', content: 'Les param√®tres Windows n√©cessitent une licence Microsoft. Sur Linux, tout est configurable librement et gratuitement !'},
					{name: 'Store', icon: 'üè™', category: 'Applications', content: 'Le Microsoft Store n√©cessite un compte Microsoft. Sur Linux, utilisez les gestionnaires de paquets (apt, dnf, pacman) gratuitement !'},
					{name: 'Photos', icon: 'üñºÔ∏è', category: 'Multim√©dia', content: 'L\'application Photos n√©cessite Windows 10/11. Utilisez GIMP, Shotwell ou Gwenview sur Linux gratuitement !'},
					{name: 'Musique', icon: 'üéµ', category: 'Multim√©dia', content: 'L\'application Musique n√©cessite Windows 10/11. Utilisez VLC, Rhythmbox ou Audacious sur Linux gratuitement !'},
					{name: 'Calculatrice', icon: 'üî¢', category: 'Accessoires', content: 'La calculatrice Windows n√©cessite Windows 10/11. Utilisez Calculator, KCalc ou Galculator sur Linux gratuitement !'},
					{name: 'Paint', icon: 'üé®', category: 'Accessoires', content: 'Paint n√©cessite Windows 10/11. Utilisez GIMP, Krita ou Pinta sur Linux gratuitement !'},
					{name: 'Bloc-notes', icon: 'üìù', category: 'Accessoires', content: 'Le Bloc-notes n√©cessite Windows 10/11. Utilisez Gedit, Kate ou Mousepad sur Linux gratuitement !'},
					{name: 'Word', icon: 'üìÑ', category: 'Bureautique', content: 'Microsoft Word n√©cessite un abonnement Office 365. Utilisez LibreOffice Writer sur Linux gratuitement !'},
					{name: 'Excel', icon: 'üìä', category: 'Bureautique', content: 'Microsoft Excel n√©cessite un abonnement Office 365. Utilisez LibreOffice Calc sur Linux gratuitement !'},
					{name: 'PowerPoint', icon: 'üìΩÔ∏è', category: 'Bureautique', content: 'Microsoft PowerPoint n√©cessite un abonnement Office 365. Utilisez LibreOffice Impress sur Linux gratuitement !'}
				],
				search() {
					if (!this.searchQuery.trim()) {
						this.searchResults = [];
						return;
					}
					const query = this.searchQuery.toLowerCase();
					this.searchResults = this.apps.filter(app => 
						app.name.toLowerCase().includes(query) || 
						app.category.toLowerCase().includes(query)
					);
				},
				openWindow(app) {
					const windowId = 'window-' + Date.now();
					const newWindow = {
						id: windowId,
						app: app,
						x: 100 + (this.windows.length * 30),
						y: 100 + (this.windows.length * 30),
						width: 600,
						height: 400,
						minimized: false,
						maximized: false,
						zIndex: this.nextZIndex++
					};
					this.windows.push(newWindow);
					this.showSearch = false;
					this.showStartMenu = false;
					this.searchQuery = '';
					this.searchResults = [];
					this.focusWindow(windowId);
				},
				focusWindow(windowId) {
					const window = this.windows.find(w => w.id === windowId);
					if (window) {
						window.zIndex = this.nextZIndex++;
					}
				},
				closeWindow(windowId) {
					this.windows = this.windows.filter(w => w.id !== windowId);
				},
				minimizeWindow(windowId) {
					const window = this.windows.find(w => w.id === windowId);
					if (window) {
						window.minimized = !window.minimized;
					}
				},
				maximizeWindow(windowId) {
					const window = this.windows.find(w => w.id === windowId);
					if (window) {
						window.maximized = !window.maximized;
						if (window.maximized) {
							window.x = 0;
							window.y = 0;
							window.width = window.innerWidth || window.innerWidth;
							window.height = window.innerHeight || window.innerHeight;
						} else {
							window.width = 600;
							window.height = 400;
						}
					}
				},
				startDrag(windowId, event) {
					const window = this.windows.find(w => w.id === windowId);
					if (!window || window.maximized) return;
					
					this.focusWindow(windowId);
					const startX = event.clientX - window.x;
					const startY = event.clientY - window.y;
					
					const onMouseMove = (e) => {
						window.x = e.clientX - startX;
						window.y = e.clientY - startY;
					};
					
					const onMouseUp = () => {
						document.removeEventListener('mousemove', onMouseMove);
						document.removeEventListener('mouseup', onMouseUp);
					};
					
					document.addEventListener('mousemove', onMouseMove);
					document.addEventListener('mouseup', onMouseUp);
				}
			}"
			class="h-screen flex flex-col bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 relative overflow-hidden"
		>
			<!-- Fond d'√©cran -->
			<div class="absolute inset-0 opacity-20">
				<div class="absolute inset-0 bg-gradient-to-br from-primary/30 via-accent/20 to-secondary/30"></div>
				<div class="absolute top-10 left-10 w-96 h-96 bg-primary rounded-full blur-3xl opacity-30"></div>
				<div class="absolute bottom-10 right-10 w-96 h-96 bg-accent rounded-full blur-3xl opacity-30"></div>
			</div>

			<!-- Zone de bureau -->
			<div class="flex-1 relative z-10 p-8 overflow-auto">
				<div class="max-w-7xl mx-auto">
					<!-- Ic√¥nes du bureau -->
					<div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
						<template x-for="app in apps.slice(0, 6)" :key="app.name">
							<div 
								@dblclick="openWindow(app)"
								class="flex flex-col items-center gap-2 p-4 rounded-lg cursor-pointer transform transition-all hover:bg-white/10 active:scale-95 select-none"
							>
								<div class="text-6xl drop-shadow-2xl filter" x-text="app.icon"></div>
								<p class="text-white text-sm text-center font-medium drop-shadow-lg bg-black/30 px-2 py-1 rounded" x-text="app.name"></p>
							</div>
						</template>
					</div>
					
					<!-- Message d'accueil -->
					<div class="mt-12 text-center">
						<div class="card bg-white/10 backdrop-blur-sm border border-white/20 shadow-xl inline-block">
							<div class="card-body p-8">
								<h2 class="text-3xl font-bold text-white mb-4">Windows 10 - √âmulation</h2>
								<p class="text-white/90 text-lg mb-4">
									Cette interface d√©montre la d√©pendance aux Big Tech
								</p>
								<p class="text-white/80">
									Double-cliquez sur les ic√¥nes ou utilisez la barre de recherche pour ouvrir des fen√™tres
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Fen√™tres ouvertes -->
			<template x-for="window in windows" :key="window.id">
				<div 
					x-show="!window.minimized"
					x-transition
					@mousedown="focusWindow(window.id)"
					:style="`position: fixed; left: ${window.x}px; top: ${window.y}px; width: ${window.maximized ? '100%' : window.width + 'px'}; height: ${window.maximized ? '100%' : window.height + 'px'}; z-index: ${window.zIndex};`"
					class="card bg-base-100 shadow-2xl border-2 border-gray-300 flex flex-col"
				>
					<!-- Barre de titre -->
					<div 
						@mousedown="startDrag(window.id, $event)"
						class="bg-gradient-to-r from-gray-700 to-gray-600 text-white px-4 py-2 flex items-center justify-between cursor-move select-none"
					>
						<div class="flex items-center gap-3">
							<div class="text-2xl" x-text="window.app.icon"></div>
							<span class="font-semibold" x-text="window.app.name"></span>
						</div>
						<div class="flex items-center gap-2">
							<button 
								@click="minimizeWindow(window.id)"
								class="btn btn-ghost btn-xs text-white hover:bg-white/20 rounded-none"
								title="Minimiser"
							>
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
								</svg>
							</button>
							<button 
								@click="maximizeWindow(window.id)"
								class="btn btn-ghost btn-xs text-white hover:bg-white/20 rounded-none"
								title="Maximiser"
							>
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
								</svg>
							</button>
							<button 
								@click="closeWindow(window.id)"
								class="btn btn-ghost btn-xs text-error hover:bg-error/20 rounded-none"
								title="Fermer"
							>
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
								</svg>
							</button>
						</div>
					</div>
					
					<!-- Contenu de la fen√™tre -->
					<div class="flex-1 overflow-auto p-6 bg-base-100">
						<div class="space-y-4">
							<div class="alert alert-warning shadow-lg border-2 border-warning/30">
								<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
								</svg>
								<div>
									<h3 class="font-bold">D√©pendance aux Big Tech</h3>
									<div class="text-sm" x-text="window.app.content"></div>
								</div>
							</div>
							
							<div class="card bg-gradient-to-br from-primary/10 to-primary/5 border-2 border-primary/20 shadow-xl">
								<div class="card-body p-6">
									<h3 class="card-title text-primary mb-4">üí° Solution NIRD</h3>
									<p class="mb-4">
										Avec la d√©marche NIRD, vous pouvez utiliser des alternatives libres et gratuites qui fonctionnent sur Linux, 
										r√©duisant ainsi votre d√©pendance aux Big Tech et √©conomisant des milliers d'euros en licences.
									</p>
									<a href="<%= basePath %>/solutions" class="btn btn-primary btn-sm">
										D√©couvrir les solutions
									</a>
								</div>
							</div>
							
							<div class="stats stats-horizontal shadow">
								<div class="stat">
									<div class="stat-title">Co√ªt annuel</div>
									<div class="stat-value text-error">500-2000‚Ç¨</div>
									<div class="stat-desc">Par poste Windows</div>
								</div>
								<div class="stat">
									<div class="stat-title">Avec Linux</div>
									<div class="stat-value text-success">0‚Ç¨</div>
									<div class="stat-desc">Gratuit et libre</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</template>

			<!-- Barre de recherche Cortana -->
			<div 
				x-show="showSearch"
				x-transition
				class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-2xl px-4"
			>
				<div class="card bg-base-100 shadow-2xl border-2 border-primary/30">
					<div class="card-body p-6">
						<div class="flex items-center gap-4 mb-4">
							<div class="text-4xl">üîç</div>
							<input 
								type="text"
								x-model="searchQuery"
								@input="search()"
								@keydown.escape="showSearch = false; searchQuery = ''; searchResults = []"
								@keydown.enter="if(searchResults.length > 0) openWindow(searchResults[0])"
								placeholder="Tapez ici pour rechercher..."
								class="input input-bordered input-primary w-full text-lg focus:outline-none focus:ring-2 focus:ring-primary"
								autofocus
							/>
						</div>
						
						<!-- R√©sultats de recherche -->
						<div x-show="searchResults.length > 0" x-transition class="space-y-2 max-h-96 overflow-y-auto">
							<template x-for="result in searchResults" :key="result.name">
								<button 
									@click="openWindow(result)"
									class="w-full flex items-center gap-4 p-4 rounded-lg hover:bg-base-200 transform transition-all text-left"
								>
									<div class="text-3xl" x-text="result.icon"></div>
									<div class="flex-1">
										<p class="font-semibold" x-text="result.name"></p>
										<p class="text-sm opacity-70" x-text="result.category"></p>
									</div>
								</button>
							</template>
						</div>
						
						<!-- Message si aucun r√©sultat -->
						<div 
							x-show="searchQuery && searchResults.length === 0" 
							x-transition
							class="text-center py-8 text-opacity-70"
						>
							<p>Aucun r√©sultat trouv√© pour "<span x-text="searchQuery" class="font-semibold"></span>"</p>
						</div>
						
						<!-- Suggestions si recherche vide -->
						<div 
							x-show="!searchQuery" 
							class="space-y-2"
						>
							<p class="text-sm opacity-70 mb-3">Suggestions :</p>
							<div class="grid grid-cols-2 gap-2">
								<template x-for="app in apps.slice(0, 4)" :key="app.name">
									<button 
										@click="openWindow(app)"
										class="flex items-center gap-3 p-3 rounded-lg hover:bg-base-200 transform transition-all text-left"
									>
										<div class="text-2xl" x-text="app.icon"></div>
										<p class="text-sm font-medium" x-text="app.name"></p>
									</button>
								</template>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Barre des t√¢ches -->
			<div class="h-14 bg-gray-800/90 backdrop-blur-md border-t border-gray-700 relative z-20 flex items-center px-4 gap-2">
				<!-- Bouton D√©marrer -->
				<button 
					@click="showStartMenu = !showStartMenu; showSearch = false"
					class="btn btn-ghost btn-circle text-white hover:bg-white/20"
				>
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
						<path d="M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z"/>
					</svg>
				</button>

				<!-- Barre de recherche Cortana -->
				<button 
					@click="showSearch = !showSearch; showStartMenu = false"
					class="flex-1 max-w-xl flex items-center gap-3 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white text-left transition-all"
				>
					<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
					</svg>
					<span class="text-sm opacity-80">Rechercher sur le Web et dans Windows</span>
				</button>

				<!-- Fen√™tres dans la barre des t√¢ches -->
				<div class="flex items-center gap-1 mx-4">
					<template x-for="window in windows" :key="window.id">
						<button 
							@click="window.minimized = !window.minimized; if(window.minimized) {} else { focusWindow(window.id); }"
							class="px-4 py-2 rounded-lg text-white text-sm hover:bg-white/20 transition-all flex items-center gap-2"
							:class="window.minimized ? 'opacity-60' : 'bg-white/10'"
						>
							<div class="text-lg" x-text="window.app.icon"></div>
							<span x-text="window.app.name"></span>
						</button>
					</template>
				</div>

				<!-- Ic√¥nes de la barre des t√¢ches -->
				<div class="flex items-center gap-2 ml-auto">
					<button class="btn btn-ghost btn-circle text-white hover:bg-white/20">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0" />
						</svg>
					</button>
					<button class="btn btn-ghost btn-circle text-white hover:bg-white/20">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
						</svg>
					</button>
					<div class="w-px h-6 bg-gray-600 mx-2"></div>
					<div class="text-white text-xs text-right">
						<div x-data="{ 
							time: new Date().toLocaleTimeString('fr-FR', {hour: '2-digit', minute: '2-digit'}),
							date: new Date().toLocaleDateString('fr-FR', {day: 'numeric', month: 'short'})
						}" 
						x-init="setInterval(() => { time = new Date().toLocaleTimeString('fr-FR', {hour: '2-digit', minute: '2-digit'}); date = new Date().toLocaleDateString('fr-FR', {day: 'numeric', month: 'short'}) }, 1000)">
							<div x-text="time"></div>
							<div class="text-[10px] opacity-80" x-text="date"></div>
						</div>
					</div>
				</div>
			</div>

			<!-- Menu D√©marrer -->
			<div 
				x-show="showStartMenu"
				x-transition
				@click.away="showStartMenu = false"
				class="absolute bottom-16 left-4 w-80 bg-gray-800/95 backdrop-blur-md rounded-lg shadow-2xl border border-gray-700 z-30"
			>
				<div class="p-4">
					<div class="grid grid-cols-4 gap-4 mb-4">
						<template x-for="app in apps.slice(0, 8)" :key="app.name">
							<button 
								@click="openWindow(app); showStartMenu = false"
								class="flex flex-col items-center gap-2 p-3 rounded-lg hover:bg-white/10 transform transition-all"
							>
								<div class="text-4xl" x-text="app.icon"></div>
								<p class="text-white text-xs text-center" x-text="app.name"></p>
							</button>
						</template>
					</div>
					<div class="divider my-2"></div>
					<div class="space-y-1">
						<button 
							@click="openWindow(apps.find(a => a.name === 'Param√®tres')); showStartMenu = false"
							class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-white/10 text-white text-left"
						>
							<div class="text-2xl">‚öôÔ∏è</div>
							<span>Param√®tres</span>
						</button>
						<button class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-white/10 text-white text-left">
							<div class="text-2xl">üîå</div>
							<span>Arr√™ter</span>
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Overlay pour fermer la recherche -->
		<div 
			x-show="showSearch"
			@click="showSearch = false; searchQuery = ''; searchResults = []"
			class="fixed inset-0 bg-black/50 z-40"
			x-transition
		></div>
	</body>
</html>
